# Batch 24 Audit (Upstream `2ef38065`)

## Planned
- Batch 24 is a PICK of upstream commit `2ef38065`.
- Upstream subject: “refactor(tools): Migrate shell tool name to a centralized constant (#11418)”.
- Intended change: move shell tool naming to a shared constant instead of inlining.

Source: `project-plans/20260104gmerge/PLAN.md` (Batch 24 row).

## Reported
- `AUDIT.md` still lists the batch as PICK with no status or local commit recorded.
- `PROGRESS.md` marks Batch 24 as **SKIP** with the note “SHELL_TOOL_NAME already exists in tool-names.ts”.
- `docs/merge-notes/batch21-25-skipped.md` also reports Batch 24 as SKIP due to an existing shell tool name constant.

Sources:
- `project-plans/20260104gmerge/AUDIT.md:95`
- `project-plans/20260104gmerge/PROGRESS.md:45`
- `docs/merge-notes/batch21-25-skipped.md:50`

## Actual (Evidence)
- The repo already centralizes shell tool names, but via `SHELL_TOOL_NAMES` in `shell-utils.ts`, not via a `SHELL_TOOL_NAME` constant in `tool-names.ts`.
- `ShellTool` itself uses the hardcoded `run_shell_command` string in the class `Name` field.
- `tool-names.ts` defines a `SHELL_TOOL` constant with value `shell`, which is not the same as `run_shell_command` and does not provide a centralized constant for the tool name used in `ShellTool`/allowlist matching.

Evidence:
- `packages/core/src/utils/shell-utils.ts:13` (`SHELL_TOOL_NAMES = ['run_shell_command', 'ShellTool']`)
- `packages/core/src/tools/shell.ts:589` (`static Name: string = 'run_shell_command'`)
- `packages/core/src/tools/tool-names.ts:56` (`SHELL_TOOL = 'shell'`)

## Gaps
- Plan expected a centralized shell tool name constant; the repo still relies on string literals and the `SHELL_TOOL_NAMES` array instead of a `SHELL_TOOL_NAME` constant in `tool-names.ts`.
- `AUDIT.md` is missing the SKIP decision recorded in `PROGRESS.md`/merge notes, and the stated reason in PROGRESS.md (“SHELL_TOOL_NAME already exists in tool-names.ts”) is inaccurate based on current code.

## Confidence
Medium — verified current code locations, but no direct evidence of the upstream change being implemented or cleanly mapped to LLxprt’s existing constants.
