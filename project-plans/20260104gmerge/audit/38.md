# Batch 38 Audit (31f58a1f, 70a99af1, 72b16b3a)

## Planned
- Cherry-pick upstream commits `31f58a1f`, `70a99af1`, `72b16b3a` to fix Windows ripgrep detection, shell auto-approval parsing, and macOS PTY spawn errors.

## Reported
- `project-plans/20260104gmerge/AUDIT.md` marks all three commits as **VERIFIED** with no-op or not-applicable outcomes:
  - `31f58a1f`: Verified NO_OP due to existing robust ripgrep path resolution.
  - `70a99af1`: Verified NO_OP due to existing shell allowlist parsing and security checks.
  - `72b16b3a`: Verified NOT APPLICABLE due to generic PTY fallback logic already present.

## Actual (evidence)
- Windows ripgrep resolution already checks packaged `@lvce-editor/ripgrep`, system `rg`, common Windows paths, and bundled binaries, which covers the upstream fix scope. See `packages/core/src/utils/ripgrepPathResolver.ts:15`.
- Shell allowlist parsing and command-splitting security is already implemented via `splitCommands()` and `checkCommandPermissions()` with per-command allowlist evaluation. See `packages/core/src/utils/shell-utils.ts:115` and `packages/core/src/utils/shell-utils.ts:310`.
- PTY execution already attempts `node-pty` via `getPty()` and cleanly falls back to `child_process` on failures, handling spawn issues without macOS-specific checks. See `packages/core/src/services/shellExecutionService.ts:63` and `packages/core/src/utils/getPty.ts:1`.

## Gaps
- No direct cherry-pick of upstream commits; LLxprt relies on existing, broader implementations. No functional gaps found relative to the planned fixes.

## Confidence
- **Medium** â€” evidence is from code inspection only; no runtime verification performed for this audit.
