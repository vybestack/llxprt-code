# Batch 07 Audit

## Intent
Implement upstream fix `05930d5e` to respect `Content-Type` in the web fetch fallback: only HTML gets html-to-text conversion, other types (JSON/plain) return raw text, and missing header defaults to HTML conversion.

## Claimed Action
Reimplemented in LLxprt as commit `30a369b56` by updating `GoogleWebFetchToolInvocation.executeFallback()` to check `content-type` before converting, and adding four tests for HTML/JSON/plain/missing header cases. (Sources: `project-plans/20260104gmerge/PROGRESS.md`, `project-plans/20260104gmerge/AUDIT.md`, `project-plans/20260104gmerge/NOTES.md`.)

## Code Evidence
- Content-Type handling in fallback fetch: `packages/core/src/tools/google-web-fetch.ts:171`
- HTML conversion when Content-Type is `text/html` or missing: `packages/core/src/tools/google-web-fetch.ts:175`
- Raw text returned for non-HTML content: `packages/core/src/tools/google-web-fetch.ts:187`
- Tests for HTML/JSON/plain/missing header handling: `packages/core/src/tools/google-web-fetch.test.ts:189`, `packages/core/src/tools/google-web-fetch.test.ts:208`, `packages/core/src/tools/google-web-fetch.test.ts:226`, `packages/core/src/tools/google-web-fetch.test.ts:243`

## Gaps/Mismatches
None found. The fallback logic and tests align with the claimed reimplementation.

## Verdict
real
