# Reimplement Plan: /stats session Subcommand

**Upstream SHA:** `c21b6899e1f1b4c17bcd1e13aeadd31ca4af2725`
**Upstream subject:** Add session subtask in /stats command (#13750)

## Context

Upstream adds a `/stats session` subcommand that shows session duration. This is the same as what the bare `/stats` command already does — the change just makes it an explicit named subcommand. Our `statsCommand.ts` is radically different from upstream (330 lines, 7 subcommands vs 65 lines, 2 subcommands) so cherry-pick would conflict on every hunk.

## What Upstream Does

1. Extracts default stats action into `defaultSessionView()` helper function
2. Adds `{ name: 'session', description: 'Show session-specific usage statistics', ... }` to subCommands array
3. Updates description from `/stats [model|tools]` to `/stats [session|model|tools]`

## Our Current State

File: `packages/cli/src/ui/commands/statsCommand.ts`

Our subcommands: `model`, `tools`, `cache`, `quota`, `buckets`, `lb`
Our description: `'check session stats. Usage: /stats [model|tools|cache|buckets|quota|lb]'`

## Implementation Steps

1. Open `packages/cli/src/ui/commands/statsCommand.ts`
2. Extract the default action body into a `defaultSessionView(context: CommandContext)` function (placed before `statsCommand`)
3. Add a `session` subcommand as the FIRST entry in the `subCommands` array:
   ```typescript
   {
     name: 'session',
     description: 'Show session-specific usage statistics.',
     kind: CommandKind.BUILT_IN,
     action: (context: CommandContext) => {
       defaultSessionView(context);
     },
   },
   ```
4. Update the main action to call `defaultSessionView(context)` instead of inline code
5. Update description to include `session`: `'check session stats. Usage: /stats [session|model|tools|cache|buckets|quota|lb]'`
6. Update the test file `packages/cli/src/ui/hooks/useSlashCompletion.test.ts` — find all references to the stats description string and update them to include `session`

## Verification

- `npm run typecheck` passes
- `npm run lint` passes
- `npm run test` passes (especially useSlashCompletion tests)
- `/stats session` shows the same output as bare `/stats`
