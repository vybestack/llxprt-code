# Reimplement Plan: Stdio Hardening

**Upstream SHA:** `f9997f92c99f9ec2d0eaee6910c47dffe9d25745`
**Batch:** 13

## What upstream does

Introduces `createWorkingStdio` pattern for robust stdio handling, TextOutput stream wiring, and IDE stdio cleanup.

## LLxprt approach

Selectively adopt hardening intent via LLxprt's existing `createInkStdio` pattern. Focus on error resilience.

## Files to modify

1. `packages/core/src/utils/stdio.ts` — harden existing utilities
2. `packages/cli/src/gemini.tsx` — apply stream wiring improvements
3. `packages/cli/src/ui/utils/textOutput.ts` — if applicable
4. Tests

## Verification

- Verify no stdout/stderr crashes during normal operation
- Verify IDE mode stdio works correctly
