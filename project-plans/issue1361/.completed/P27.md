Phase: P27
Completed: 2026-02-13 18:04
Files Deleted:
- packages/core/src/storage/SessionPersistenceService.ts
- packages/core/src/storage/SessionPersistenceService.test.ts
Files Modified:
- packages/core/src/index.ts — Removed SessionPersistenceService, PersistedSession, PersistedUIHistoryItem, PersistedToolCall exports
- packages/core/src/core/geminiChat.ts — Removed ChatRecordingService comment
- packages/cli/src/gemini.tsx — Removed all old persistence code (import, restoredSession, SessionPersistenceService usage)
- packages/cli/src/ui/AppContainer.tsx — Removed old SessionPersistenceService usage and restoredSession prop
- packages/cli/src/ui/App.tsx — Removed PersistedSession import and prop
- packages/cli/src/gemini.provider-init.test.ts — Added mock methods for new recording integration
- packages/cli/src/gemini.test.tsx — Added mock methods for new recording integration
Verification:
- npm run typecheck: PASS
- npm run test: 264 files passed, 3662 tests passed, 0 failed
- npm run lint: 0 errors, 2 warnings (pre-existing)
- npm run build: PASS
- npm run format: PASS
- grep SessionPersistenceService: 0 matches
- grep ChatRecordingService: 0 matches
- grep PersistedSession|PersistedUIHistory|PersistedToolCall: 0 matches
