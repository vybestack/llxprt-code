# Phase 22: Config Wiring - COMPLETED

## Phase ID
`PLAN-20260130-ASYNCTASK.P22`

## Completion Date
2026-01-30

## Requirements Implemented

Wire all async task components together in the Config system.

## Files Modified

1. **packages/core/src/config/config.ts**
   - Added imports for AsyncTaskReminderService and AsyncTaskAutoTrigger
   - Added private fields:
     - `asyncTaskReminderService?: AsyncTaskReminderService`
     - `asyncTaskAutoTrigger?: AsyncTaskAutoTrigger`
   - Added `getAsyncTaskReminderService(): AsyncTaskReminderService | undefined`
   - Added `setupAsyncTaskAutoTrigger()` method for wiring with client callbacks
   - Marked with `@plan PLAN-20260130-ASYNCTASK.P22`

## Implementation Details

### AsyncTaskReminderService Getter
```typescript
getAsyncTaskReminderService(): AsyncTaskReminderService | undefined {
  if (!this.asyncTaskReminderService) {
    const asyncTaskManager = this.getAsyncTaskManager();
    if (asyncTaskManager) {
      this.asyncTaskReminderService = new AsyncTaskReminderService(
        asyncTaskManager,
      );
    }
  }
  return this.asyncTaskReminderService;
}
```

### AsyncTaskAutoTrigger Setup
```typescript
setupAsyncTaskAutoTrigger(
  isAgentBusy: () => boolean,
  triggerAgentTurn: (message: string) => Promise<void>,
): () => void {
  const asyncTaskManager = this.getAsyncTaskManager();
  const reminderService = this.getAsyncTaskReminderService();

  if (!asyncTaskManager || !reminderService) {
    return () => {};
  }

  if (!this.asyncTaskAutoTrigger) {
    this.asyncTaskAutoTrigger = new AsyncTaskAutoTrigger(
      asyncTaskManager,
      reminderService,
      isAgentBusy,
      triggerAgentTurn,
    );
  }

  return this.asyncTaskAutoTrigger.subscribe();
}
```

## Verification

- [OK] TypeScript compiles (`npm run typecheck`)
- [OK] Config has getAsyncTaskReminderService getter
- [OK] Config has setupAsyncTaskAutoTrigger method
- [OK] All services properly wired together
- [OK] Tests pass

## Plan Markers

```bash
grep -rn "@plan PLAN-20260130-ASYNCTASK.P22" packages/core/src
```

Results:
- packages/core/src/config/config.ts:57: @plan PLAN-20260130-ASYNCTASK.P22
- packages/core/src/config/config.ts:471: @plan PLAN-20260130-ASYNCTASK.P22
