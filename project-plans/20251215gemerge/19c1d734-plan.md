# Implementation Plan: 19c1d734 - Bundle Command Docs

## Summary of Upstream Changes

Upstream commit `19c1d734` ("add bundle command info to integration test docs (#11034)"):
- Adds "Building the tests" section to integration-tests.md
- Documents that `npm run bundle` must run before integration tests
- Inserted after "Overview" section, before "Running the tests" section
- Added 12 lines total

## Pre-Implementation Checks

### 1. Verify File State
```bash
# Confirm file exists
test -f /Users/acoliver/projects/llxprt-code-branches/llxprt-code-1/dev-docs/integration-tests.md && echo "File exists" || echo "File missing"

# Verify no duplicate "Building the tests" section exists
grep -c "## Building the tests" /Users/acoliver/projects/llxprt-code-branches/llxprt-code-1/dev-docs/integration-tests.md
# Expected output: 0 (if already exists, abort and investigate)
```

### 2. Document Known Branding Issue
**IMPORTANT**: Line 92 of dev-docs/integration-tests.md currently says "gemini command":
```
... output from the gemini command ...
```

This is a pre-existing branding issue NOT introduced by this commit. It should be fixed separately as part of comprehensive branding cleanup. DO NOT fix it in this commit.

## Implementation Steps

### Step 1: Update dev-docs/integration-tests.md

**Exact Insertion Point**: After line 10, before line 11 (after "Overview" section, before "Running the tests" section)

**Use Edit Tool with these exact strings:**

**old_string:**
```
These tests are located in the `integration-tests` directory and are run using a custom test runner.

## Running the tests
```

**new_string:**
```
These tests are located in the `integration-tests` directory and are run using a custom test runner.

## Building the tests

Prior to running any integration tests, you need to create a release bundle that you want to actually test:

```bash
npm run bundle
```

You must re-run this command after making any changes to the CLI source code, but not after making changes to tests.

## Running the tests
```

**Notes:**
- The new section uses "Building the tests" as the title (matches upstream exactly)
- Content is adapted for llxprt-code context (uses our terminology)
- Triple backticks shown as actual backticks (not escaped)
- Preserves exact formatting and spacing from upstream

### Step 2: Verify File State After Edit

```bash
# Verify section was added
grep -A 5 "## Building the tests" /Users/acoliver/projects/llxprt-code-branches/llxprt-code-1/dev-docs/integration-tests.md

# Verify only one instance exists
grep -c "## Building the tests" /Users/acoliver/projects/llxprt-code-branches/llxprt-code-1/dev-docs/integration-tests.md
# Expected output: 1

# Verify line count increased by 12
wc -l /Users/acoliver/projects/llxprt-code-branches/llxprt-code-1/dev-docs/integration-tests.md
# Expected: 150 lines (was 138, added 12)
```

## Files to Modify

| File | Change | Line Range |
|------|--------|------------|
| `dev-docs/integration-tests.md` | Insert "Building the tests" section | After line 10 |

## Acceptance Criteria

- [ ] Pre-implementation checks pass (file exists, no duplicates)
- [ ] "Building the tests" section added after "Overview", before "Running the tests"
- [ ] Section explains `npm run bundle` requirement
- [ ] Section explains when to re-run (after CLI changes, not test changes)
- [ ] Uses llxprt-code appropriate commands (content adapted, not direct copy)
- [ ] Post-implementation verification confirms section exists exactly once
- [ ] Line 92 branding issue documented but NOT changed (pre-existing issue)
- [ ] File line count increased by exactly 12 lines

## Implementation Notes

### Section Title Decision
The upstream commit uses "Building the tests" as the section title. While this might seem to suggest building test code, in context it clearly means "building the bundle for testing". We preserve this exact title to maintain consistency with upstream.

### Branding Consistency
The pre-existing "gemini command" reference on line 92 is documented but not addressed in this commit. This should be tracked separately for comprehensive branding review.

### Context Differences
- Upstream: "Gemini CLI" → Our fork: "LLxprt Code" (already correct in Overview)
- Commands remain the same: `npm run bundle` works identically
- Directory structure identical: `integration-tests/` directory

## Verification Commands

```bash
# Full verification sequence
cd /Users/acoliver/projects/llxprt-code-branches/llxprt-code-1

# 1. Verify edit succeeded
grep -q "## Building the tests" dev-docs/integration-tests.md && echo "✓ Section added" || echo "✗ Section missing"

# 2. Verify content is correct
grep -A 3 "npm run bundle" dev-docs/integration-tests.md | head -6

# 3. Verify placement is correct (should be between Overview and Running)
grep -B 2 "## Building the tests" dev-docs/integration-tests.md | tail -3
grep -A 1 "after making changes to tests." dev-docs/integration-tests.md | tail -2

# 4. Verify no duplicates
[ $(grep -c "## Building the tests" dev-docs/integration-tests.md) -eq 1 ] && echo "✓ No duplicates" || echo "✗ Duplicates found"
```

## Risk Assessment

**Low Risk**: Documentation-only change
- No code changes
- No build/test/lint cycle required (docs exception)
- Single file modification
- Clear insertion point with surrounding context
