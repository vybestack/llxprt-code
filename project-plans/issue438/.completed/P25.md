# P25 Completion Evidence

## Scope
Remediated `packages/lsp/src/channels/mcp-channel.ts` to restore MCP channel compile correctness and satisfy P24 MCP channel tests without test changes.

## Evidence

### 1) TypeScript compile
Command:
`cd packages/lsp && bunx tsc --noEmit`

Result:
- Exit code: 0
- No TypeScript errors

### 2) MCP channel tests
Command:
`cd packages/lsp && bunx vitest run test/mcp-channel.test.ts`

Result:
- `[OK] test/mcp-channel.test.ts (12 tests)`
- Test Files: 1 passed
- Tests: 12 passed
- Exit code: 0

### 3) Deferred-pattern grep in implementation file
Command:
`grep -nE "deferred|TODO|FIXME|HACK" packages/lsp/src/channels/mcp-channel.ts || true`

Result:
- No matches
- Exit code: 0

## Notes on behavior remediated
- MCP tool registrations now use typed schemas so callback args are strongly typed.
- Defensive unknown-shape parsing added for locations, document symbols, workspace symbols, and diagnostics.
- Boundary violations return MCP tool error payloads with `isError: true`.
- Path/location formatting returns workspace-relative paths when in workspace (including nested paths), preserving expected `path:line:col` output.
